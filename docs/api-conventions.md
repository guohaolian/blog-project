# 接口规范与约定（API Conventions）

目标：让前后端联调“少扯皮、少返工”。在真正写业务前先把这些约定定下来。

## 1) 统一响应体

建议后端所有接口返回统一结构：

```json
{
  "code": 0,
  "message": "ok",
  "data": {},
  "timestamp": 1700000000000
}
```

- `code`：业务码（0 表示成功）
- `message`：提示文案（失败时给出可读信息）
- `data`：成功数据
- `timestamp`：服务器时间戳（可选，但建议）

## 2) HTTP 状态码使用建议

- 200：业务成功或业务失败（通过 `code` 区分）
- 400：参数校验不通过（也可统一使用 200 + code，看团队偏好；建议 400 更直观）
- 401：未登录/Token 失效
- 403：已登录但无权限
- 404：资源不存在
- 500：后端未捕获异常

> 简化优先：你也可以选择“全部 200，错误全靠 code”，但 401/403 建议仍保持。

## 3) 分页约定

请求参数：
- `pageNum`：从 1 开始
- `pageSize`：默认 10，最大建议 100

响应 `data` 建议：

```json
{
  "list": [],
  "total": 0,
  "pageNum": 1,
  "pageSize": 10
}
```

## 4) 鉴权（JWT）约定

- 请求头：`Authorization: Bearer <token>`
- Token 存储：前端建议 localStorage（简单优先），并配合路由守卫
- 过期处理：
  - API 返回 401
  - 前端拦截器捕获后：清 token、跳转登录页

## 5) 错误码建议（最小集合）

- `0`：成功
- `40001`：参数错误
- `40100`：未登录 / token 失效
- `40300`：无权限
- `40400`：资源不存在
- `50000`：系统错误

## 6) 跨域（开发/生产）

- 开发：前端通过 Vite 代理 `/api` 到本地后端（体验最好）
- 生产：Nginx 反代 `/api`，前端与 API 同域，同源请求 => 不需要 CORS（最省心）

## 7) 接口文档工具（建议二选一）

- Apifox：前端友好、协作友好
- Swagger/OpenAPI：后端自生成

建议：第一阶段用 Apifox + 手工维护；稳定后再补 Swagger。
